(this["webpackJsonpstore-sneakers"]=this["webpackJsonpstore-sneakers"]||[]).push([[0],{19:function(e,t,a){e.exports={overlay:"Drawer_overlay__3oE1S",overlayVisible:"Drawer_overlayVisible__1Onpt",drawer:"Drawer_drawer__XaZMH",items:"Drawer_items__XutR9"}},20:function(e,t,a){e.exports={card:"Card_card__35wN0",plus:"Card_plus__3MF9E",favorite:"Card_favorite__-ptFE"}},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),s=a(34),n=a.n(s),i=a(14),o=a(11),d=a(12),l=a(7),u=a.n(l),j=a(13),b=a(4),x=a(5),f=a.n(x),h=a(2),m=c.a.createContext({}),p=function(){var e=c.a.useContext(m),t=e.cartItems,a=e.setCartItems,r=t.reduce((function(e,t){return t.price+e}),0);return{cartItems:t,setCartItems:a,totalPrice:r}},O=a.p+"static/media/logo.9e858141.svg",v=a.p+"static/media/cart.5113b08f.svg",g=a.p+"static/media/heart.31c528b0.svg",k=a.p+"static/media/user.381202f7.svg",N=a(1),w=function(e){var t=p().totalPrice;return Object(N.jsxs)("header",{className:"d-flex justify-between align-center p-40",children:[Object(N.jsx)(i.b,{to:"/",children:Object(N.jsxs)("div",{className:"d-flex align-center",children:[Object(N.jsx)("img",{width:40,height:40,src:O,alt:"logo"}),Object(N.jsxs)("div",{children:[Object(N.jsx)("h3",{className:"text-uppercase",children:"The Best Sneakers"}),Object(N.jsx)("p",{className:"opacity-5",children:"shop of the best sneakers"})]})]})}),Object(N.jsxs)("ul",{className:"d-flex",children:[Object(N.jsxs)("li",{className:"mr-30 cu-p",children:[Object(N.jsx)("img",{onClick:e.onClickCart,width:18,height:18,src:v,alt:"cart"}),Object(N.jsxs)("span",{children:[t," euro"]})]}),Object(N.jsx)("li",{className:"mr-20 cu-p",children:Object(N.jsx)(i.b,{to:"/favorites",children:Object(N.jsx)("img",{width:18,height:18,src:g,alt:"like"})})}),Object(N.jsx)("li",{className:"cu-p",children:Object(N.jsx)(i.b,{to:"/orders",children:Object(N.jsx)("img",{width:18,height:18,src:k,alt:"user"})})})]})]})},y=a.p+"static/media/arrow.fc322251.svg",C=function(e){var t=e.title,a=e.description,r=e.image,s=c.a.useContext(m).setCartOpened;return Object(N.jsxs)("div",{className:"cartEmpty d-flex align-center justify-center flex-column flex",children:[Object(N.jsx)("img",{className:"mb-20",width:"120px",src:r,alt:"basket is empty"}),Object(N.jsx)("h2",{children:t}),Object(N.jsx)("p",{className:"opacity-6",children:a}),Object(N.jsxs)("button",{onClick:function(){return s(!1)},className:"greenButton",children:[Object(N.jsx)("img",{src:y,alt:"arrow"}),"Come back"]})]})},I=a(19),_=a.n(I),S=a.p+"static/media/btn-remove.b1fef0aa.svg",A=a.p+"static/media/empty-cart.03669791.jpg",F=a.p+"static/media/complete-order.980b2eed.jpg",T=function(e){return new Promise((function(t){return setTimeout(t,e)}))},B=function(e){var t=e.onClose,a=e.onRemove,r=e.items,s=void 0===r?[]:r,n=e.opened,i=p(),o=i.cartItems,d=i.setCartItems,l=i.totalPrice,x=c.a.useState(null),h=Object(b.a)(x,2),m=h[0],O=h[1],v=c.a.useState(!1),g=Object(b.a)(v,2),k=g[0],w=g[1],I=c.a.useState(!1),B=Object(b.a)(I,2),E=B[0],P=B[1],V=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),e.next=4,f.a.post("https://60f30ad66d44f30017788896.mockapi.io/orders",{items:o});case 4:t=e.sent,a=t.data,O(a.id),w(!0),d([]),r=0;case 10:if(!(r<o.length)){e.next=19;break}return c=o[r],e.next=14,f.a.delete("https://60f30ad66d44f30017788896.mockapi.io/cart/"+c.id);case 14:return e.next=16,T(1e3);case 16:r++,e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),alert("Failed to create order :(");case 24:P(!1);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{className:"".concat(_.a.overlay," ").concat(n?_.a.overlayVisible:""),children:Object(N.jsxs)("div",{className:_.a.drawer,children:[Object(N.jsxs)("h2",{className:"d-flex justify-between mb-30",children:["Basket",Object(N.jsx)("img",{onClick:t,className:"removeBtn cu-p",src:S,alt:"remove"})]}),s.length>0?Object(N.jsxs)("div",{className:"d-flex flex-column flex",children:[Object(N.jsx)("div",{className:"items flex",children:s.map((function(e){return Object(N.jsxs)("div",{className:"cartItem d-flex align-center mb-20",children:[Object(N.jsx)("div",{style:{backgroundImage:"url(".concat(e.imageUrl,")")},className:"cartItemImg"}),Object(N.jsxs)("div",{className:"mr-20 flex",children:[Object(N.jsx)("p",{className:"mb-5",children:e.title}),Object(N.jsx)("b",{children:e.price})]}),Object(N.jsx)("img",{onClick:function(){return a(e.id)},className:"removeBtn",src:S,alt:"remove"})]},e.id)}))}),Object(N.jsxs)("div",{className:"cartTotalBlock",children:[Object(N.jsxs)("ul",{children:[Object(N.jsxs)("li",{children:[Object(N.jsx)("span",{children:"Total:"}),Object(N.jsx)("div",{}),Object(N.jsxs)("b",{children:[l," euro"]})]}),Object(N.jsxs)("li",{children:[Object(N.jsx)("span",{children:"Tax 5%:"}),Object(N.jsx)("div",{}),Object(N.jsxs)("b",{children:[l/100*5," euro"]})]})]}),Object(N.jsxs)("button",{disabled:E,onClick:V,className:"greenButton",children:["Checkout",Object(N.jsx)("img",{src:y,alt:"arrow"})]})]})]}):Object(N.jsx)(C,{title:k?"Order is processed":"Basket is empty",description:k?"Your order #".concat(m," will be delivered by courier soon"):"Add at least one pair of sneakers to order",image:k?F:A})]})})},E=a(36),P=a(20),V=a.n(P),M=a.p+"static/media/heart-unliked.b7857eaf.svg",D=a.p+"static/media/heart-liked.9b947698.svg",L=a.p+"static/media/btn-plus.a4c35ddb.svg",q=a.p+"static/media/btn-unchecked.4bd49de7.svg",R=function(e){var t=e.id,a=e.title,r=e.imageUrl,s=e.price,n=e.onFavorite,i=e.onPlus,o=e.favorited,d=void 0!==o&&o,l=e.loading,u=void 0!==l&&l,j=c.a.useContext(m).isItemAdded,x=c.a.useState(d),f=Object(b.a)(x,2),h=f[0],p=f[1],O={id:t,parentId:t,title:a,imageUrl:r,price:s};return Object(N.jsx)("div",{className:V.a.card,children:u?Object(N.jsxs)(E.a,{speed:2,width:165,height:250,viewBox:"0 0 155 265",backgroundColor:"#058aff",foregroundColor:"#ecebeb",children:[Object(N.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"155",height:"155"}),Object(N.jsx)("rect",{x:"0",y:"167",rx:"5",ry:"5",width:"155",height:"15"}),Object(N.jsx)("rect",{x:"0",y:"187",rx:"5",ry:"5",width:"100",height:"15"}),Object(N.jsx)("rect",{x:"0",y:"234",rx:"5",ry:"5",width:"80",height:"25"}),Object(N.jsx)("rect",{x:"124",y:"230",rx:"10",ry:"10",width:"32",height:"32"})]}):Object(N.jsxs)(N.Fragment,{children:[n&&Object(N.jsx)("div",{className:V.a.favorite,onClick:function(){n(O),p(!h)},children:Object(N.jsx)("img",{src:h?D:M,alt:"unliked"})}),Object(N.jsx)("img",{width:"100%",height:135,src:r,alt:"sneakers"}),Object(N.jsx)("h5",{children:a}),Object(N.jsxs)("div",{className:"d-flex justify-between align-center",children:[Object(N.jsxs)("div",{className:"d-flex flex-column",children:[Object(N.jsx)("span",{children:"Price"}),Object(N.jsxs)("b",{children:[s," euro"]})]}),i&&Object(N.jsx)("img",{className:V.a.plus,onClick:function(){i(O)},src:j(t)?q:L,alt:"plus"})]})]})})},U=a.p+"static/media/search.48c52bf5.svg",J=function(e){var t=e.items,a=e.searchValue,r=e.setSearchValue,c=e.onChangeSearchInput,s=e.onAddToFavorite,n=e.onAddToCart,i=e.isLoading;return Object(N.jsxs)("div",{className:"content  p-40",children:[Object(N.jsxs)("div",{className:"d-flex align-center justify-between mb-40",children:[Object(N.jsx)("h1",{children:a?'Search by request: "'.concat(a,'"'):"All sneakers"}),Object(N.jsxs)("div",{className:"search-block d-flex",children:[Object(N.jsx)("img",{src:U,alt:"search"}),a&&Object(N.jsx)("img",{onClick:function(){return r("")},className:"clear cu-p",src:S,alt:"clear"}),Object(N.jsx)("input",{onChange:c,value:a,placeholder:"search ..."})]})]}),Object(N.jsx)("div",{className:"d-flex flex-wrap",children:function(){var e=t.filter((function(e){return e.title.toLowerCase().includes(a.toLowerCase())}));return(i?Object(d.a)(Array(8)):e).map((function(e,t){return Object(N.jsx)(R,Object(o.a)({onFavorite:function(e){return s(e)},onPlus:function(e){return n(e)},loading:i},e),t)}))}()})]})},X=function(){var e=c.a.useContext(m),t=e.favorites,a=e.onAddToFavorite;return Object(N.jsxs)("div",{className:"content  p-40",children:[Object(N.jsx)("div",{className:"d-flex align-center justify-between mb-40",children:Object(N.jsx)("h1",{children:"My favorites"})}),Object(N.jsx)("div",{className:"d-flex flex-wrap",children:t.map((function(e,t){return Object(N.jsx)(R,Object(o.a)({favorited:!0,onFavorite:a},e),t)}))})]})},H=function(){var e=c.a.useContext(m),t=(e.onAddToFavorite,e.onAddToCart,c.a.useState([])),a=Object(b.a)(t,2),r=a[0],s=a[1],n=c.a.useState(!0),i=Object(b.a)(n,2),l=i[0],x=i[1];return c.a.useEffect((function(){Object(j.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("https://60f30ad66d44f30017788896.mockapi.io/orders");case 3:t=e.sent,a=t.data,s(a.reduce((function(e,t){return[].concat(Object(d.a)(e),Object(d.a)(t.items))}),[])),x(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert("Error when requesting orders");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),Object(N.jsxs)("div",{className:"content  p-40",children:[Object(N.jsx)("div",{className:"d-flex align-center justify-between mb-40",children:Object(N.jsx)("h1",{children:"My orders"})}),Object(N.jsx)("div",{className:"d-flex flex-wrap",children:(l?Object(d.a)(Array(8)):r).map((function(e,t){return Object(N.jsx)(R,Object(o.a)({loading:l},e),t)}))})]})},Y=function(){var e=c.a.useState([]),t=Object(b.a)(e,2),a=t[0],r=t[1],s=c.a.useState([]),n=Object(b.a)(s,2),i=n[0],l=n[1],x=c.a.useState([]),p=Object(b.a)(x,2),O=p[0],v=p[1],g=c.a.useState(""),k=Object(b.a)(g,2),y=k[0],C=k[1],I=c.a.useState(!1),_=Object(b.a)(I,2),S=_[0],A=_[1],F=c.a.useState(!0),T=Object(b.a)(F,2),E=T[0],P=T[1];c.a.useEffect((function(){function e(){return(e=Object(j.a)(u.a.mark((function e(){var t,a,c,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([f.a.get("https://60f30ad66d44f30017788896.mockapi.io/cart"),f.a.get("https://60f30ad66d44f30017788896.mockapi.io/favorites"),f.a.get("https://60f30ad66d44f30017788896.mockapi.io/items")]);case 3:t=e.sent,a=Object(b.a)(t,3),c=a[0],s=a[1],n=a[2],P(!1),l(c.data),v(s.data),r(n.data),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Error while requesting data"),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var V=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=i.find((function(e){return Number(e.parentId)===Number(t.id)})))){e.next=8;break}return l((function(e){return e.filter((function(e){return Number(e.parentId)!==Number(t.id)}))})),e.next=6,f.a.delete("https://60f30ad66d44f30017788896.mockapi.io/cart/".concat(a.id));case 6:e.next=14;break;case 8:return l((function(e){return[].concat(Object(d.a)(e),[t])})),e.next=11,f.a.post("https://60f30ad66d44f30017788896.mockapi.io/cart",t);case 11:r=e.sent,c=r.data,l((function(e){return e.map((function(e){return e.parentId===c.parentId?Object(o.a)(Object(o.a)({},e),{},{id:c.id}):e}))}));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),alert("Failed to add to basket"),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!O.find((function(e){return Number(e.id)===Number(t.id)}))){e.next=6;break}f.a.delete("https://60f30ad66d44f30017788896.mockapi.io/favorites/".concat(t.id)),v((function(e){return e.filter((function(e){return Number(e.id)!==Number(t.id)}))})),e.next=11;break;case 6:return e.next=8,f.a.post("https://60f30ad66d44f30017788896.mockapi.io/favorites",t);case 8:a=e.sent,r=a.data,v((function(e){return[].concat(Object(d.a)(e),[r])}));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),alert("Failed to add to favorites"),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(m.Provider,{value:{items:a,cartItems:i,favorites:O,isItemAdded:function(e){return i.some((function(t){return Number(t.parentId)===Number(e)}))},onAddToFavorite:M,onAddToCart:V,setCartOpened:A,setCartItems:l},children:Object(N.jsxs)("div",{className:"wrapper clear",children:[Object(N.jsx)(B,{items:i,onClose:function(){return A(!1)},onRemove:function(e){try{f.a.delete("https://60f30ad66d44f30017788896.mockapi.io/cart/".concat(e)),l((function(t){return t.filter((function(t){return Number(t.id)!==Number(e)}))}))}catch(t){alert("Error when deleting from trash"),console.error(t)}},opened:S}),Object(N.jsx)(w,{onClickCart:function(){return A(!0)}}),Object(N.jsx)(h.a,{path:"/",exact:!0,children:Object(N.jsx)(J,{items:a,cartItems:i,searchValue:y,setSearchValue:C,onChangeSearchInput:function(e){C(e.target.value)},onAddToFavorite:M,onAddToCart:V,isLoading:E})}),Object(N.jsx)(h.a,{path:"/favorites",exact:!0,children:Object(N.jsx)(X,{})}),Object(N.jsx)(h.a,{path:"/orders",exact:!0,children:Object(N.jsx)(H,{})})]})})};a(66),a(67);n.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(i.a,{children:Object(N.jsx)(Y,{})})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.ca1e7d59.chunk.js.map