(this["webpackJsonpstore-sneakers"]=this["webpackJsonpstore-sneakers"]||[]).push([[0],{19:function(e,t,a){e.exports={overlay:"Drawer_overlay__3oE1S",overlayVisible:"Drawer_overlayVisible__1Onpt",drawer:"Drawer_drawer__XaZMH",items:"Drawer_items__XutR9"}},20:function(e,t,a){e.exports={card:"Card_card__35wN0",plus:"Card_plus__3MF9E",favorite:"Card_favorite__-ptFE"}},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),s=a(34),n=a.n(s),i=a(13),o=a(11),d=a(7),l=a.n(d),j=a(12),u=a(4),b=a(5),x=a.n(b),h=a(2),m=c.a.createContext({}),f=function(){var e=c.a.useContext(m),t=e.cartItems,a=e.setCartItems,r=t.reduce((function(e,t){return t.price+e}),0);return{cartItems:t,setCartItems:a,totalPrice:r}},p=a.p+"static/media/logo.9e858141.svg",O=a.p+"static/media/cart.5113b08f.svg",v=a.p+"static/media/heart.31c528b0.svg",g=a.p+"static/media/user.381202f7.svg",k=a(1),N=function(e){var t=f().totalPrice;return Object(k.jsxs)("header",{className:"d-flex justify-between align-center p-40",children:[Object(k.jsx)(i.b,{to:"/",children:Object(k.jsxs)("div",{className:"d-flex align-center",children:[Object(k.jsx)("img",{width:40,height:40,src:p,alt:"logo"}),Object(k.jsxs)("div",{children:[Object(k.jsx)("h3",{className:"text-uppercase",children:"The Best Sneakers"}),Object(k.jsx)("p",{className:"opacity-5",children:"shop of the best sneakers"})]})]})}),Object(k.jsxs)("ul",{className:"d-flex",children:[Object(k.jsxs)("li",{className:"mr-30 cu-p",children:[Object(k.jsx)("img",{onClick:e.onClickCart,width:18,height:18,src:O,alt:"cart"}),Object(k.jsxs)("span",{children:[t," euro"]})]}),Object(k.jsx)("li",{className:"mr-20 cu-p",children:Object(k.jsx)(i.b,{to:"/favorites",children:Object(k.jsx)("img",{width:18,height:18,src:v,alt:"like"})})}),Object(k.jsx)("li",{className:"cu-p",children:Object(k.jsx)(i.b,{to:"/orders",children:Object(k.jsx)("img",{width:18,height:18,src:g,alt:"user"})})})]})]})},w=a.p+"static/media/arrow.fc322251.svg",y=function(e){var t=e.title,a=e.description,r=e.image,s=c.a.useContext(m).setCartOpened;return Object(k.jsxs)("div",{className:"cartEmpty d-flex align-center justify-center flex-column flex",children:[Object(k.jsx)("img",{className:"mb-20",width:"120px",src:r,alt:"basket is empty"}),Object(k.jsx)("h2",{children:t}),Object(k.jsx)("p",{className:"opacity-6",children:a}),Object(k.jsxs)("button",{onClick:function(){return s(!1)},className:"greenButton",children:[Object(k.jsx)("img",{src:w,alt:"arrow"}),"Come back"]})]})},C=a(19),_=a.n(C),S=a.p+"static/media/btn-remove.b1fef0aa.svg",I=a.p+"static/media/empty-cart.03669791.jpg",A=a.p+"static/media/complete-order.980b2eed.jpg",F=function(e){return new Promise((function(t){return setTimeout(t,e)}))},T=function(e){var t=e.onClose,a=e.onRemove,r=e.items,s=void 0===r?[]:r,n=e.opened,i=f(),o=i.cartItems,d=i.setCartItems,b=i.totalPrice,h=c.a.useState(null),m=Object(u.a)(h,2),p=m[0],O=m[1],v=c.a.useState(!1),g=Object(u.a)(v,2),N=g[0],C=g[1],T=c.a.useState(!1),B=Object(u.a)(T,2),E=B[0],P=B[1],V=function(){var e=Object(j.a)(l.a.mark((function e(){var t,a,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),e.next=4,x.a.post("https://60f30ad66d44f30017788896.mockapi.io/orders",{items:o});case 4:t=e.sent,a=t.data,O(a.id),C(!0),d([]),r=0;case 10:if(!(r<o.length)){e.next=19;break}return c=o[r],e.next=14,x.a.delete("https://60f30ad66d44f30017788896.mockapi.io/cart/"+c.id);case 14:return e.next=16,F(1e3);case 16:r++,e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),alert("Failed to create order :(");case 24:P(!1);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"".concat(_.a.overlay," ").concat(n?_.a.overlayVisible:""),children:Object(k.jsxs)("div",{className:_.a.drawer,children:[Object(k.jsxs)("h2",{className:"d-flex justify-between mb-30",children:["Basket",Object(k.jsx)("img",{onClick:t,className:"removeBtn cu-p",src:S,alt:"remove"})]}),s.length>0?Object(k.jsxs)("div",{className:"d-flex flex-column flex",children:[Object(k.jsx)("div",{className:"items flex",children:s.map((function(e){return Object(k.jsx)("div",{children:Object(k.jsxs)("div",{className:"cartItem d-flex align-center mb-20",children:[Object(k.jsx)("div",{style:{backgroundImage:"url(".concat(e.imageUrl,")")},className:"cartItemImg"}),Object(k.jsxs)("div",{className:"mr-20 flex",children:[Object(k.jsx)("p",{className:"mb-5",children:e.title}),Object(k.jsx)("b",{children:e.price})]}),Object(k.jsx)("img",{onClick:function(){return a(e.id)},className:"removeBtn",src:S,alt:"remove"})]},e.id)})}))}),Object(k.jsxs)("div",{className:"cartTotalBlock",children:[Object(k.jsxs)("ul",{children:[Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{children:"Total:"}),Object(k.jsx)("div",{}),Object(k.jsxs)("b",{children:[b," euro"]})]}),Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{children:"Tax 5%:"}),Object(k.jsx)("div",{}),Object(k.jsxs)("b",{children:[b/100*5," euro"]})]})]}),Object(k.jsxs)("button",{disabled:E,onClick:V,className:"greenButton",children:["Checkout",Object(k.jsx)("img",{src:w,alt:"arrow"})]})]})]}):Object(k.jsx)(y,{title:N?"Order is processed":"Basket is empty",description:N?"Your order #".concat(p," will be delivered by courier soon"):"Add at least one pair of sneakers to order",image:N?A:I})]})})},B=a(15),E=a(36),P=a(20),V=a.n(P),M=a.p+"static/media/heart-unliked.b7857eaf.svg",D=a.p+"static/media/heart-liked.9b947698.svg",L=a.p+"static/media/btn-plus.a4c35ddb.svg",U=a.p+"static/media/btn-unchecked.4bd49de7.svg",q=function(e){var t=e.id,a=e.title,r=e.imageUrl,s=e.price,n=e.onFavorite,i=e.onPlus,o=e.favorited,d=void 0!==o&&o,l=e.loading,j=void 0!==l&&l,b=c.a.useContext(m).isItemAdded,x=c.a.useState(d),h=Object(u.a)(x,2),f=h[0],p=h[1];return Object(k.jsx)("div",{className:V.a.card,children:j?Object(k.jsxs)(E.a,{speed:2,width:165,height:250,viewBox:"0 0 155 265",backgroundColor:"#058aff",foregroundColor:"#ecebeb",children:[Object(k.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"155",height:"155"}),Object(k.jsx)("rect",{x:"0",y:"167",rx:"5",ry:"5",width:"155",height:"15"}),Object(k.jsx)("rect",{x:"0",y:"187",rx:"5",ry:"5",width:"100",height:"15"}),Object(k.jsx)("rect",{x:"0",y:"234",rx:"5",ry:"5",width:"80",height:"25"}),Object(k.jsx)("rect",{x:"124",y:"230",rx:"10",ry:"10",width:"32",height:"32"})]}):Object(k.jsxs)(k.Fragment,{children:[n&&Object(k.jsx)("div",{className:V.a.favorite,onClick:function(){n({id:t,title:a,imageUrl:r,price:s}),p(!f)},children:Object(k.jsx)("img",{src:f?D:M,alt:"unliked"})}),Object(k.jsx)("img",{width:"100%",height:135,src:r,alt:"sneakers"}),Object(k.jsx)("h5",{children:a}),Object(k.jsxs)("div",{className:"d-flex justify-between align-center",children:[Object(k.jsxs)("div",{className:"d-flex flex-column",children:[Object(k.jsx)("span",{children:"Price"}),Object(k.jsxs)("b",{children:[s," euro"]})]}),i&&Object(k.jsx)("img",{className:V.a.plus,onClick:function(){i({id:t,title:a,imageUrl:r,price:s})},src:b(t)?U:L,alt:"plus"})]})]})})},R=a.p+"static/media/search.48c52bf5.svg",J=function(e){var t=e.items,a=e.searchValue,r=e.setSearchValue,c=e.onChangeSearchInput,s=e.onAddToFavorite,n=e.onAddToCart,i=e.isLoading;return Object(k.jsxs)("div",{className:"content  p-40",children:[Object(k.jsxs)("div",{className:"d-flex align-center justify-between mb-40",children:[Object(k.jsx)("h1",{children:a?'Search by request: "'.concat(a,'"'):"All sneakers"}),Object(k.jsxs)("div",{className:"search-block d-flex",children:[Object(k.jsx)("img",{src:R,alt:"search"}),a&&Object(k.jsx)("img",{onClick:function(){return r("")},className:"clear cu-p",src:S,alt:"clear"}),Object(k.jsx)("input",{onChange:c,value:a,placeholder:"search ..."})]})]}),Object(k.jsx)("div",{className:"d-flex flex-wrap",children:function(){var e=t.filter((function(e){return e.title.toLowerCase().includes(a.toLowerCase())}));return(i?Object(o.a)(Array(8)):e).map((function(e,t){return Object(k.jsx)(q,Object(B.a)({onFavorite:function(e){return s(e)},onPlus:function(e){return n(e)},loading:i},e),t)}))}()})]})},X=function(){var e=c.a.useContext(m),t=e.favorites,a=e.onAddToFavorite;return Object(k.jsxs)("div",{className:"content  p-40",children:[Object(k.jsx)("div",{className:"d-flex align-center justify-between mb-40",children:Object(k.jsx)("h1",{children:"My favorites"})}),Object(k.jsx)("div",{className:"d-flex flex-wrap",children:t.map((function(e,t){return Object(k.jsx)(q,Object(B.a)({favorited:!0,onFavorite:a},e),t)}))})]})},H=function(){var e=c.a.useContext(m),t=(e.onAddToFavorite,e.onAddToCart,c.a.useState([])),a=Object(u.a)(t,2),r=a[0],s=a[1],n=c.a.useState(!0),i=Object(u.a)(n,2),d=i[0],b=i[1];return c.a.useEffect((function(){Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("https://60f30ad66d44f30017788896.mockapi.io/orders");case 3:t=e.sent,a=t.data,s(a.reduce((function(e,t){return[].concat(Object(o.a)(e),Object(o.a)(t.items))}),[])),b(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert("Error when requesting orders");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),Object(k.jsxs)("div",{className:"content  p-40",children:[Object(k.jsx)("div",{className:"d-flex align-center justify-between mb-40",children:Object(k.jsx)("h1",{children:"My orders"})}),Object(k.jsx)("div",{className:"d-flex flex-wrap",children:(d?Object(o.a)(Array(8)):r).map((function(e,t){return Object(k.jsx)(q,Object(B.a)({loading:d},e),t)}))})]})},Y=function(){var e=c.a.useState([]),t=Object(u.a)(e,2),a=t[0],r=t[1],s=c.a.useState([]),n=Object(u.a)(s,2),i=n[0],d=n[1],b=c.a.useState([]),f=Object(u.a)(b,2),p=f[0],O=f[1],v=c.a.useState(""),g=Object(u.a)(v,2),w=g[0],y=g[1],C=c.a.useState(!1),_=Object(u.a)(C,2),S=_[0],I=_[1],A=c.a.useState(!0),F=Object(u.a)(A,2),B=F[0],E=F[1];c.a.useEffect((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,a,c,s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([x.a.get("https://60f30ad66d44f30017788896.mockapi.io/cart"),x.a.get("https://60f30ad66d44f30017788896.mockapi.io/favorites"),x.a.get("https://60f30ad66d44f30017788896.mockapi.io/items")]);case 3:t=e.sent,a=Object(u.a)(t,3),c=a[0],s=a[1],n=a[2],E(!1),d(c.data),O(s.data),r(n.data),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Error while requesting data"),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var P=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!i.find((function(e){return Number(e.id)===Number(t.id)}))){e.next=7;break}return d((function(e){return e.filter((function(e){return Number(e.id)!==Number(t.id)}))})),e.next=5,x.a.delete("https://60f30ad66d44f30017788896.mockapi.io/cart/".concat(t.id));case 5:e.next=10;break;case 7:return d((function(e){return[].concat(Object(o.a)(e),[t])})),e.next=10,x.a.post("https://60f30ad66d44f30017788896.mockapi.io/cart",t);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),alert("Failed to add to basket"),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!p.find((function(e){return Number(e.id)===Number(t.id)}))){e.next=6;break}x.a.delete("https://60f30ad66d44f30017788896.mockapi.io/favorites/".concat(t.id)),O((function(e){return e.filter((function(e){return Number(e.id)!==Number(t.id)}))})),e.next=11;break;case 6:return e.next=8,x.a.post("https://60f30ad66d44f30017788896.mockapi.io/favorites",t);case 8:a=e.sent,r=a.data,O((function(e){return[].concat(Object(o.a)(e),[r])}));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),alert("Failed to add to favorites"),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)(m.Provider,{value:{items:a,cartItems:i,favorites:p,isItemAdded:function(e){return i.some((function(t){return Number(t.id)===Number(e)}))},onAddToFavorite:V,onAddToCart:P,setCartOpened:I,setCartItems:d},children:Object(k.jsxs)("div",{className:"wrapper clear",children:[Object(k.jsx)(T,{items:i,onClose:function(){return I(!1)},onRemove:function(e){try{x.a.delete("https://60f30ad66d44f30017788896.mockapi.io/cart/".concat(e)),d((function(t){return t.filter((function(t){return Number(t.id)!==Number(e)}))}))}catch(t){alert("Error when deleting from trash"),console.error(t)}},opened:S}),Object(k.jsx)(N,{onClickCart:function(){return I(!0)}}),Object(k.jsx)(h.a,{path:"/",exact:!0,children:Object(k.jsx)(J,{items:a,cartItems:i,searchValue:w,setSearchValue:y,onChangeSearchInput:function(e){y(e.target.value)},onAddToFavorite:V,onAddToCart:P,isLoading:B})}),Object(k.jsx)(h.a,{path:"/favorites",exact:!0,children:Object(k.jsx)(X,{})}),Object(k.jsx)(h.a,{path:"/orders",exact:!0,children:Object(k.jsx)(H,{})})]})})};a(66),a(67);n.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(i.a,{children:Object(k.jsx)(Y,{})})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.e46ae69e.chunk.js.map